<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br">
<head>
    <title>DoBot.chat</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <script src="/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <style th:replace="~{fragmento-variaveis-tema :: estilo}"></style>
    <link rel="stylesheet" type="text/css" media="all" th:href="@{/css/chat.css}" />

    <script>
        window.onload = function() {
            const chatbox = document.querySelector(".chatbox");
            chatbox.scrollTop = chatbox.scrollHeight;
            document.getElementById("msgUsuario").focus();
        };
    </script>
</head>

      <body class="container-fluid d-flex flex-column justify-content-center align-items-center vh-100">
    <nav class="navbar navbar-expand-lg navbar w-100" style="background-color: var(--cor-barra-navegacao)">

    <div class="container-fluid">
        <a class="navbar-brand" th:href="@{/}">
            <img src="/img/dobot-h-800px-transp.png" alt="DoBot" style="max-height: 50px;">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link font-weight-bold" href="#" data-bs-toggle="modal" data-bs-target="#sobreModal">Sobre</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Incluir o modal a partir do fragmento -->
<div th:replace="~{fragments/sobre :: sobreModal}"></div>

<div class="chatbox">
    <div th:each="mensagem : ${mensagens}">
        <div th:if="${mensagem.autor().name() == 'USUARIO'}" class="mensagem usuario">
            <p th:utext="${mensagem.conteudo()}"></p>
        </div>
        <div th:if="${mensagem.autor().name() == 'BOT'}" class="mensagem bot">
            <p th:utext="${mensagem.conteudo()}"></p>
        </div>
    </div>
</div>
<form id="chatForm" method="post" th:action="@{/chatbot}" class="input-group mb-2">
    <input type="text" id="msgUsuario" name="msgUsuario" class="form-control" placeholder="Escreva uma mensagem" required/>
    <button class="button" type="submit">&#x27A4;</button>
</form>
</body>
</html>