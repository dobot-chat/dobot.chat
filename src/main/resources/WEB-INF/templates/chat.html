<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br">
    <head>
        <title>Chatbot</title>
        <link rel="stylesheet" type="text/css" media="all" th:href="@{/css/chat.css}" />
        <script>
            // Simplesmente move o scroll para o fundo após o carregamento da página
            window.onload = function() {
                const chatbox = document.querySelector(".chatbox")
                chatbox.scrollTop = chatbox.scrollHeight;

                document.getElementById("msgUsuario").focus();
            };
        </script>
    </head>
    <body>
        <div class="chatbox">
            <div th:each="mensagem : ${mensagens}">
                <div th:if="${mensagem.autor().name() == 'USUARIO'}" class="mensagem usuario">
                    <p th:utext="${mensagem.conteudo()}"></p>
                </div>
                <div th:if="${mensagem.autor().name() == 'BOT'}" class="mensagem bot">
                    <p th:utext="${mensagem.conteudo()}"></p>
                </div>
            </div>
        </div>
        <form id="chatForm" method="post" th:action="@{/chatbot}">
            <input type="text" id="msgUsuario" name="msgUsuario" placeholder="Escreva uma mensagem" required/>
            <button type="submit">&#x27A4;</button>
        </form>
    </body>
</html>
